# Migrate Attachments
This is a script I wrote at Atlassian to help clients that were missing attachments in their pages after running a space export and then importing the export file into their new instance. This version is written to work with a copy of the attachments directory from the old server, however lines 50-51 can be modified so it will work with the attachments directory file from the export file itself. This script basically copies the old attachments directory and then creates a modifed one based on the [Hierarchical File System Attachment Storage](https://confluence.atlassian.com/doc/hierarchical-file-system-attachment-storage-704578486.html). To use it you will need to run the included SQL query on both the old system and the new system, correlate the results in a spreadsheet using VLOOKUP, create a csv file from the results, and then point this script at that csv file and run it. Once that's done you can just merge the attachments directory with the main one in the target system and then the attachments will show up again. I may update this in the future with more detailed instructions if we decide to make this process a public facing knowledge base article. The reason I wrote this script is the manual process outlined in our [Restoring attachments from a filesystem backup to an imported space](https://confluence.atlassian.com/confkb/restoring-attachments-from-a-filesystem-backup-to-an-imported-space-951392066.html) article is time consuming and not feasible when you are working with large spaces with thousands of attachments.